<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="canonical" href="https://mrparkers.github.io/terraform-provider-keycloak/resources/identity_provider_token_exchange_scope_permission/">
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>keycloak\_identity\_provider\_token\_exchange\_scope\_permission Resource - Terraform Provider: Keycloak</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  <link href="../../index.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "keycloak\\_identity\\_provider\\_token\\_exchange\\_scope\\_permission Resource";
    var mkdocs_page_input_path = "resources/identity_provider_token_exchange_scope_permission.md";
    var mkdocs_page_url = "/terraform-provider-keycloak/resources/identity_provider_token_exchange_scope_permission/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Terraform Provider: Keycloak</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../..">Getting Started</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Data Sources</span></p>
                <ul>
                    <li class="toctree-l1"><a class="" href="../../data_sources/keycloak_group.md">keycloak_group</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../../data_sources/keycloak_openid_client.md">keycloak_openid_client</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../../data_sources/keycloak_realm.md">keycloak_realm</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../../data_sources/keycloak_realm_keys.md">keycloak_realm_keys</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../../data_sources/keycloak_role.md">keycloak_role</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../../data_sources/keycloak_saml_client_installation_provider.md">keycloak_saml_client_installation_provider</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Resources</span></p>
                <ul>
                    <li class="toctree-l1"><a class="" href="../keycloak_realm.md">keycloak_realm</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_realm_events.md">keycloak_realm_events</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_role.md">keycloak_role</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_user.md">keycloak_user</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_user_roles.md">keycloak_user_roles</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_group.md">keycloak_group</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_group_memberships.md">keycloak_group_memberships</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_group_roles.md">keycloak_group_roles</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_default_groups.md">keycloak_default_groups</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_openid_client.md">keycloak_openid_client</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_openid_client_scope.md">keycloak_openid_client_scope</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_openid_client_default_scopes.md">keycloak_openid_client_default_scopes</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_openid_client_optional_scopes.md">keycloak_openid_client_optional_scopes</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_openid_user_attribute_protocol_mapper.md">keycloak_openid_user_attribute_protocol_mapper</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_openid_user_property_protocol_mapper.md">keycloak_openid_user_property_protocol_mapper</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_openid_group_membership_protocol_mapper.md">keycloak_openid_group_membership_protocol_mapper</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_openid_hardcoded_claim_protocol_mapper.md">keycloak_openid_hardcoded_claim_protocol_mapper</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_openid_full_name_protocol_mapper.md">keycloak_openid_full_name_protocol_mapper</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_openid_audience_protocol_mapper.md">keycloak_openid_audience_protocol_mapper</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_openid_hardcoded_role_protocol_mapper.md">keycloak_openid_hardcoded_role_protocol_mapper</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_openid_user_realm_role_protocol_mapper.md">keycloak_openid_user_realm_role_protocol_mapper</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_openid_user_client_role_protocol_mapper.md">keycloak_openid_user_client_role_protocol_mapper</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_openid_user_session_note_protocol_mapper.md">keycloak_openid_user_session_note_protocol_mapper</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_openid_client_service_account_role.md">keycloak_openid_client_service_account_role</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_saml_client.md">keycloak_saml_client</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_saml_user_attribute_protocol_mapper.md">keycloak_saml_user_attribute_protocol_mapper</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_saml_user_property_protocol_mapper.md">keycloak_saml_user_property_protocol_mapper</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_saml_client_default_scopes.md">keycloak_saml_client_default_scopes</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_saml_client_scope.md">keycloak_saml_client_scope</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_generic_client_protocol_mapper.md">keycloak_generic_client_protocol_mapper</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_ldap_user_federation.md">keycloak_ldap_user_federation</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_ldap_full_name_mapper.md">keycloak_ldap_full_name_mapper</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_ldap_group_mapper.md">keycloak_ldap_group_mapper</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_ldap_hardcoded_role_mapper.md">keycloak_ldap_hardcoded_role_mapper</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_ldap_msad_user_account_control_mapper.md">keycloak_ldap_msad_user_account_control_mapper</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_ldap_msad_lds_user_account_control_mapper.md">keycloak_ldap_msad_lds_user_account_control_mapper</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_ldap_user_attribute_mapper.md">keycloak_ldap_user_attribute_mapper</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_custom_user_federation.md">keycloak_custom_user_federation</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_saml_identity_provider.md">keycloak_saml_identity_provider</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_oidc_identity_provider.md">keycloak_oidc_identity_provider</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_generic_client_role_mapper.md">keycloak_generic_client_role_mapper</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_attribute_importer_identity_provider_mapper.md">keycloak_attribute_importer_identity_provider_mapper</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_authentication_execution.md">keycloak_authentication_execution</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_authentication_execution_config.md">keycloak_authentication_execution_config</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../keycloak_identity_provider_token_exchange_scope_permission.md">keycloak_identity_provider_token_exchange_scope_permission</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Terraform Provider: Keycloak</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
    
    <li>keycloak\_identity\_provider\_token\_exchange\_scope\_permission Resource</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/mrparkers/terraform-provider-keycloak/edit/master/docs/resources/identity_provider_token_exchange_scope_permission.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="keycloak_identity_provider_token_exchange_scope_permission-resource">keycloak_identity_provider_token_exchange_scope_permission Resource</h1>
<p>Allows you to manage Identity Provider "Token exchange" Scope Based Permissions.</p>
<p>This is part of a preview keycloak feature. You need to enable this feature to be able to use this resource.
More information about enabling the preview feature can be found here: https://www.keycloak.org/docs/latest/securing_apps/index.html#_token-exchange</p>
<p>When enabling Identity Provider Permissions, Keycloak does several things automatically:
1. Enable Authorization on build-in realm-management client
1. Create a "token-exchange" scope
1. Create a resource representing the identity provider
1. Create a scope based permission for the "token-exchange" scope and identity provider resource</p>
<p>The only thing that is missing is a policy set on the permission.
As the policy lives within the context of the realm-management client, you cannot create a policy resource and link to from with your <em>.tf</em> file. This would also cause an implicit cycle dependency.
Thus, the only way to manage this in terraform is to create and manage the policy internally from within this terraform resource itself.
At the moment only a client policy type is supported. The client policy will automatically be created for the clients parameter.</p>
<h2 id="example-usage">Example Usage</h2>
<pre><code class="hcl">resource &quot;keycloak_realm&quot; &quot;token_exchange_realm&quot; {
  realm   = &quot;token-exchange_destination_realm&quot;
  enabled = true
}

resource &quot;keycloak_oidc_identity_provider&quot; &quot;token_exchange_my_oidc_idp&quot; {
  realm              = keycloak_realm.token_exchange_realm.id
  alias              = &quot;myIdp&quot;
  authorization_url  = &quot;http://localhost:8080/auth/realms/someRealm/protocol/openid-connect/auth&quot;
  token_url          = &quot;http://localhost:8080/auth/realms/someRealm/protocol/openid-connect/token&quot;
  client_id          = &quot;clientId&quot;
  client_secret      = &quot;secret&quot;
  default_scopes     = &quot;openid&quot;
}

resource &quot;keycloak_openid_client&quot; &quot;token-exchange_webapp_client&quot; {
  realm_id              = keycloak_realm.token_exchange_realm.id
  name                  = &quot;webapp_client&quot;
  client_id             = &quot;webapp_client&quot;
  client_secret         = &quot;secret&quot;
  description           = &quot;a webapp client on the destination realm&quot;
  access_type           = &quot;CONFIDENTIAL&quot;
  standard_flow_enabled = true
  valid_redirect_uris = [
    &quot;http://localhost:8080/*&quot;,
  ]
}

//relevant part
resource &quot;keycloak_identity_provider_token_exchange_scope_permission&quot; &quot;oidc_idp_permission&quot; {
  realm_id       = keycloak_realm.token_exchange_realm.id
  provider_alias = keycloak_oidc_identity_provider.token_exchange_my_oidc_idp.alias
  policy_type    = &quot;client&quot;
  clients        = [
    keycloak_openid_client.token-exchange_webapp_client.id
  ]
}
</code></pre>

<h2 id="argument-reference">Argument Reference</h2>
<ul>
<li><code>realm_id</code> - (Required) The realm that the identity provider exists in.</li>
<li><code>provider_alias</code> - (Required) Alias of the identity provider.</li>
<li><code>policy_type</code> - (Optional) Defaults to "client" This is also the only value policy type supported by this provider.</li>
<li><code>clients</code> - (Required) A list of IDs of the clients for which a policy will be created and set on scope based token exchange permission.</li>
</ul>
<h2 id="attributes-reference">Attributes Reference</h2>
<ul>
<li><code>policy_id</code> - (Computed) Policy ID that will be set on the scope based token exchange permission automatically created by enabling permissions on the reference identity provider.</li>
<li><code>authorization_resource_server_id</code> - (Computed) Resource server ID representing the realm management client on which this permission is managed.</li>
<li><code>authorization_idp_resource_id</code> - (Computed) Resource ID representing the identity provider, this automatically created by keycloak.</li>
<li><code>authorization_token_exchange_scope_permission_id</code> - (Computed) Permission ID representing the Permission with scope 'Token Exchange' and the resource 'authorization_idp_resource_id', this automatically created by keycloak, the policy ID will be set on this permission.</li>
</ul>
<h2 id="import">Import</h2>
<p>This resource can be imported using the format <code>{{realm_id}}/{{provider_alias}}</code>, where <code>provider_alias</code> is the alias that
you assign to the identity provider upon creation.</p>
<p>Example:</p>
<pre><code class="bash">$ terraform import keycloak_identity_provider_token_exchange_scope_permission.oidc_idp_permission my-realm/myIdp
</code></pre>
              
            </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/mrparkers/terraform-provider-keycloak/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
