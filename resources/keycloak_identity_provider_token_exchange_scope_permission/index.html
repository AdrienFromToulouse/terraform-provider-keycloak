<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>keycloak_identity_provider_token_exchange_scope_permission - Terraform Provider: Keycloak</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  <link href="../../index.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "keycloak_identity_provider_token_exchange_scope_permission";
    var mkdocs_page_input_path = "resources/keycloak_identity_provider_token_exchange_scope_permission.md";
    var mkdocs_page_url = "/terraform-provider-keycloak/resources/keycloak_identity_provider_token_exchange_scope_permission/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Terraform Provider: Keycloak</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Getting Started</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Data Sources</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../data_sources/keycloak_group/">keycloak_group</a>
                </li>
                <li class="">
                    
    <a class="" href="../../data_sources/keycloak_openid_client/">keycloak_openid_client</a>
                </li>
                <li class="">
                    
    <a class="" href="../../data_sources/keycloak_realm/">keycloak_realm</a>
                </li>
                <li class="">
                    
    <a class="" href="../../data_sources/keycloak_realm_keys/">keycloak_realm_keys</a>
                </li>
                <li class="">
                    
    <a class="" href="../../data_sources/keycloak_role/">keycloak_role</a>
                </li>
                <li class="">
                    
    <a class="" href="../../data_sources/keycloak_saml_client_installation_provider/">keycloak_saml_client_installation_provider</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Resources</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../keycloak_realm/">keycloak_realm</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_realm_events/">keycloak_realm_events</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_role/">keycloak_role</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_user/">keycloak_user</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_user_roles/">keycloak_user_roles</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_group/">keycloak_group</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_group_memberships/">keycloak_group_memberships</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_group_roles/">keycloak_group_roles</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_default_groups/">keycloak_default_groups</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_openid_client/">keycloak_openid_client</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_openid_client_scope/">keycloak_openid_client_scope</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_openid_client_default_scopes/">keycloak_openid_client_default_scopes</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_openid_client_optional_scopes/">keycloak_openid_client_optional_scopes</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_openid_user_attribute_protocol_mapper/">keycloak_openid_user_attribute_protocol_mapper</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_openid_user_property_protocol_mapper/">keycloak_openid_user_property_protocol_mapper</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_openid_group_membership_protocol_mapper/">keycloak_openid_group_membership_protocol_mapper</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_openid_hardcoded_claim_protocol_mapper/">keycloak_openid_hardcoded_claim_protocol_mapper</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_openid_full_name_protocol_mapper/">keycloak_openid_full_name_protocol_mapper</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_openid_audience_protocol_mapper/">keycloak_openid_audience_protocol_mapper</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_openid_hardcoded_role_protocol_mapper/">keycloak_openid_hardcoded_role_protocol_mapper</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_openid_user_realm_role_protocol_mapper/">keycloak_openid_user_realm_role_protocol_mapper</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_openid_user_client_role_protocol_mapper/">keycloak_openid_user_client_role_protocol_mapper</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_openid_user_session_note_protocol_mapper/">keycloak_openid_user_session_note_protocol_mapper</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_openid_client_service_account_role/">keycloak_openid_client_service_account_role</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_saml_client/">keycloak_saml_client</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_saml_user_attribute_protocol_mapper/">keycloak_saml_user_attribute_protocol_mapper</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_saml_user_property_protocol_mapper/">keycloak_saml_user_property_protocol_mapper</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_saml_client_default_scopes/">keycloak_saml_client_default_scopes</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_saml_client_scope/">keycloak_saml_client_scope</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_generic_client_protocol_mapper/">keycloak_generic_client_protocol_mapper</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_ldap_user_federation/">keycloak_ldap_user_federation</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_ldap_full_name_mapper/">keycloak_ldap_full_name_mapper</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_ldap_group_mapper/">keycloak_ldap_group_mapper</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_ldap_hardcoded_role_mapper/">keycloak_ldap_hardcoded_role_mapper</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_ldap_msad_user_account_control_mapper/">keycloak_ldap_msad_user_account_control_mapper</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_ldap_msad_lds_user_account_control_mapper/">keycloak_ldap_msad_lds_user_account_control_mapper</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_ldap_user_attribute_mapper/">keycloak_ldap_user_attribute_mapper</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_custom_user_federation/">keycloak_custom_user_federation</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_saml_identity_provider/">keycloak_saml_identity_provider</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_oidc_identity_provider/">keycloak_oidc_identity_provider</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_generic_client_role_mapper/">keycloak_generic_client_role_mapper</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_attribute_importer_identity_provider_mapper/">keycloak_attribute_importer_identity_provider_mapper</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_authentication_execution/">keycloak_authentication_execution</a>
                </li>
                <li class="">
                    
    <a class="" href="../keycloak_authentication_execution_config/">keycloak_authentication_execution_config</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">keycloak_identity_provider_token_exchange_scope_permission</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#keycloak_identity_provider_token_exchange_scope_permission">keycloak_identity_provider_token_exchange_scope_permission</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#example-usage">Example Usage</a></li>
        
            <li><a class="toctree-l4" href="#argument-reference">Argument Reference</a></li>
        
            <li><a class="toctree-l4" href="#attributes-reference">Attributes Reference</a></li>
        
            <li><a class="toctree-l4" href="#import">Import</a></li>
        
        </ul>
    

    </ul>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Terraform Provider: Keycloak</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Resources &raquo;</li>
        
      
    
    <li>keycloak_identity_provider_token_exchange_scope_permission</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/mrparkers/terraform-provider-keycloak/edit/master/docs/resources/keycloak_identity_provider_token_exchange_scope_permission.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="keycloak_identity_provider_token_exchange_scope_permission">keycloak_identity_provider_token_exchange_scope_permission</h1>
<p>Allows you to manage Identity Provider "Token exchange" Scope Based Permissions.</p>
<p>This is part of a preview keycloak feature. You need to enable this feature to be able to use this resource.
More information about enabling the preview feature can be found here: https://www.keycloak.org/docs/latest/securing_apps/index.html#_token-exchange</p>
<p>When enabling Identity Provider Permissions, Keycloak does several things automatically:
1. Enable Authorization on build-in realm-management client
1. Create a "token-exchange" scope
1. Create a resource representing the identity provider
1. Create a scope based permission for the "token-exchange" scope and identity provider resource</p>
<p>The only thing that is missing is a policy set on the permission.
As the policy lives within the context of the realm-management client, you cannot create a policy resource and link to from with your <em>.tf</em> file. This would also cause an implicit cycle dependency.
Thus, the only way to manage this in terraform is to create and manage the policy internally from within this terraform resource itself.
At the moment only a client policy type is supported. The client policy will automatically be created for the clients parameter.</p>
<h3 id="example-usage">Example Usage</h3>
<pre><code class="hcl">resource &quot;keycloak_realm&quot; &quot;token-exchange_realm&quot; {
  realm   = &quot;token-exchange_destination_realm&quot;
  enabled = true
}

resource keycloak_oidc_identity_provider token-exchange_my_oidc_idp {
  realm              = keycloak_realm.token-exchange_realm.id
  alias              = &quot;myIdp&quot;
  authorization_url  = &quot;http://localhost:8080/auth/realms/someRealm/protocol/openid-connect/auth&quot;
  token_url          = &quot;http://localhost:8080/auth/realms/someRealm/protocol/openid-connect/token&quot;
  client_id          = &quot;clientId&quot;
  client_secret      = &quot;secret&quot;
  default_scopes     = &quot;openid&quot;
}

resource &quot;keycloak_openid_client&quot; &quot;token-exchange_webapp_client&quot; {
  realm_id              = keycloak_realm.token-exchange_realm.id
  name                  = &quot;webapp_client&quot;
  client_id             = &quot;webapp_client&quot;
  client_secret         = &quot;secret&quot;
  description           = &quot;a webapp client on the destination realm&quot;
  access_type           = &quot;CONFIDENTIAL&quot;
  standard_flow_enabled = true
  valid_redirect_uris = [
    &quot;http://localhost:8080/*&quot;,
  ]
}

//relevant part
resource &quot;keycloak_identity_provider_token_exchange_scope_permission&quot; &quot;oidc_idp_permission&quot; {
  realm_id       = keycloak_realm.token-exchange_realm.id
  provider_alias = keycloak_oidc_identity_provider.token-exchange_my_oidc_idp.alias
  policy_type    = &quot;client&quot;
  clients        = [keycloak_openid_client.token-exchange_webapp_client.id]
}
</code></pre>

<h3 id="argument-reference">Argument Reference</h3>
<p>The following arguments are supported:</p>
<ul>
<li><code>realm_id</code> - (Required) The realm this group exists in.</li>
<li><code>provider_alias</code> - (Required) Alias of the identity provider.</li>
<li><code>policy_type</code> - (Optional) Defaults to "client" This is also the only value policy type supported by this provider.</li>
<li><code>clients</code> - (Required) Ids of the clients for which a policy will be created and set on scope based token exchange permission.</li>
</ul>
<h3 id="attributes-reference">Attributes Reference</h3>
<p>In addition to the arguments listed above, the following computed attributes are exported:</p>
<ul>
<li><code>policy_id</code> - Policy id that will be set on the scope based token exchange permission automatically created by enabling permissions on the reference identity provider.</li>
<li><code>authorization_resource_server_id</code> - Resource server id representing the realm management client on which this permission is managed.</li>
<li><code>authorization_idp_resource_id</code> - Resource id representing the identity provider, this automatically created by keycloak.</li>
<li><code>authorization_token_exchange_scope_permission_id</code> - Permission id representing the Permission with scope 'Token Exchange' and the resource 'authorization_idp_resource_id', this automatically created by keycloak, the policy id will be set on this permission.</li>
</ul>
<h3 id="import">Import</h3>
<p>This resource can be imported using the format
<code>{{realm_id}}/{{provider_alias}}</code>, where <code>provider_alias</code> is the alias that you assign to the identity provider upon creation.</p>
<p>Example:</p>
<pre><code class="bash">$ terraform import keycloak_identity_provider_token_exchange_scope_permission.my_permission my-realm/my_idp
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="../keycloak_authentication_execution_config/" class="btn btn-neutral" title="keycloak_authentication_execution_config"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/mrparkers/terraform-provider-keycloak/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../keycloak_authentication_execution_config/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>

</body>
</html>
